<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/WeixinApi.js"></script>
<title>必须要在微信中打开</title>
<script type="text/javascript">
	
	function close() {
		var flag = WeixinApi.openInWeixin();
		if (!flag) {
			alert("请在微信浏览器中打开！");
			//window.location.href='重定向的网页url';    
		}
	}
	// 所有功能必须包含在 WeixinApi.ready中进行
	WeixinApi.ready(function(Api) {
		// 微信分享的数据
		var wxData = {
			"appId" : '',
			"imgUrl" : 'http://apppic/show.jpg',
			"link" : '链接地址',
			"desc" : "小伙伴们，我正在参加感恩节抽奖活动，希望能中个iPhone6，快来帮帮我吧!",
			"title" : "感恩节礼物 -- iPhone6 抽到就是你的"
		};
		// 分享的回调
		var wxCallbacks = {
			// 分享操作开始之前
			ready : function() {
				// 你可以在这里对分享的数据进行重组
			},
			// 分享被用户自动取消
			cancel : function(resp) {
				// 你可以在你的页面上给用户一个小Tip，为什么要取消呢？
			},
			// 分享失败了
			fail : function(resp) {
				// 分享失败了，是不是可以告诉用户：不要紧，可能是网络问题，一会儿再试试？
			},
			// 分享成功
			confirm : function(resp) {
			},
			// 整个分享过程结束
			all : function(resp, shareTo) {
				// 如果你做的是一个鼓励用户进行分享的产品，在这里是不是可以给用户一些反馈了？
			}
		};

		// 用户点开右上角popup菜单后，点击分享给好友，会执行下面这个代码
		Api.shareToFriend(wxData, wxCallbacks);
		// 点击分享到朋友圈，会执行下面这个代码
		Api.shareToTimeline(wxData, wxCallbacks);
		// 点击分享到腾讯微博，会执行下面这个代码
		Api.shareToWeibo(wxData, wxCallbacks);
	});
</script>
</head>
<body>

</body>
</html>